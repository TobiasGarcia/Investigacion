Hay varias fuentes de interrupción, dependen del PIC. Hay que habilitarlas para poder utilizarlas. Se revisa la bandera de interrupción para no tener que revisar todas las señales. La bandera se coloca en alto cuando se detecta una interrupción, incluso si dejo de ser detectada para que no sea omitida por los periodos de duración de la activación. Si se detecta una interrupción se desactiva una bandera para no recibir más interrupciones. Se termina de ejecutar la línea en curso y se procede a revisar si hay alguna interrupción. El vector de interrupción está en la posición 0004h. Las fuentes de interrupciones varían según el modelo del PIC. Interrupciones externas e internas. Las posiciones de las instrucciones que se deben ejecutar luego de una interrupción están en la tabla de vectorización. Hay registros para poder habilitar cada interrupción. Luego de activar una interrupción, según la tabla de vectorización se ejecuta una instrucción, que normalmente es de JMP (jump) para ir hacia otra zona de la memoria donde están todas las instrucciones correspondientes a la interrupción. Los microcontroladores de gama baja y media solo procesan interrupciones, pero los de gama alta procesan dos prioridades, alta y baja. No se produce borrado por hardware en las interrupciones del puerto serie y del timer 2. Registro IP (Interrupt Priority). Una interrupción de nivel bajo puede ser interrumpida por una de alto, pero no por otra de nivel bajo. Terminar ejecución RETI. Las interrupciones son revisadas en el estado 5 fase 2 de cada ciclo de máquina. Si está habilitada la individual y la global se termina la instrucción, se guarda la posición actual del programa principal, se ejecuta la subrutina y luego mediante RETI se regresa, algunas veces hay que rehabilitar la interrupción individual (MÁS INFO EN EL DOCUMENTO CON EJERCICIOS). Los micros traen incorporado un dispositivo que les permite controlar las interrupciones. Las tarjetas de Arduino incluyen una unidad de interrupciones. La rutina de interrupción se llama ISR. La tabla de vectores inicia con la interrupción RESET. La siguiente en prioridad es INT0 y luego INT1. El primer tipo de interrupción es por nivel de voltaje (lógico) y flancos de subida o de bajada y se limpian por hardware. El segundo son las que son modificadas por software. Las variables que serán modificadas en le ISR deben ser declaradas con el modificador volatile para indicar que pueden cambiar en cualquier momento. Hacer que los ISR sean lo más rápido posible. Los PICs de gama baja no admiten interrupciones, solo RESET. Se deshabilita la interrupción global cuando se detecta una. Tabla del vector de interrupciones. La tabla contiene las direcciones de las ISR, pero para encontrar la tabla se utiliza 0x0004h en la memoria [UNO]. Utilizar volatile. El bit GIE deshabilitad todas las interrupciones. Hay que revisar primero cual fue la cause, se revisan los señalizadores. Hay otro bit para cada interrupción que es el bit que la habilita o no. Todas pueden ser deshabilitadas menos la de RESET [UNO].